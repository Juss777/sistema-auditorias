<div class="page">
  <div class="container example">
    <span (click)="cambioPAdm()" [class.active-switch]="!colaborador"
      >Administrador</span
    >
    <span (click)="cambioPCol()" [class.active-switch]="colaborador"
      >Colaborador</span
    >
  </div>
  <div class="container">
    <div class="titulo-bloque u-mb-5" *ngIf="colaborador">
      Carga de documento / Balance
    </div>
    <div class="titulo-bloque u-mb-10" *ngIf="!colaborador">Tarea</div>
    <div class="subtitulo-bloque u-mb-10">
      BAZ 2016 - Oficio 230/2022 - Requerimiento de información
    </div>
    <div class="semaphore" *ngFor="let sem of semaphore">
      <span
        [ngClass]="{
          semaphore__delivery: sem.estatus == 'Pendiente de entrega',
          semaphore__ready: sem.estatus == 'Listo',
          semaphore__revision: sem.estatus == 'Pendiente de revisión',
          semaphore__introduce: sem.estatus == 'No se va a presentar',
          semaphore__undelivered: sem.estatus == 'No entregado',
          semaphore__notReviewed: sem.estatus == 'No revisado',
          semaphore__additional: sem.estatus == 'Cambios adicionales',
          semaphore__wrong: sem.estatus == 'Entregado mal'
        }"
      ></span>
      <span>{{ sem.estatus }}</span>
    </div>
  </div>

  <!--Datos generales-->
  <section>
    <div class="container">
      <div class="sectionNoBg">
        <div class="sectionNoBg__title">Datos generales</div>
        <div class="sectionNoBg__content">
          <div class="requirements__overflow detailReq">
            <p-table class="table datosGenerales" [value]="tarea">
              <ng-template pTemplate="header">
                <tr>
                  <th>Partida</th>
                  <th>Tipo de requerimiento</th>
                  <th>Acredita</th>
                  <th>Área</th>
                  <th>Responsable</th>
                  <th>Fecha de entrega</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-tarea>
                <tr>
                  <td>{{ tarea.partida }}</td>
                  <td>{{ tarea.requerimiento }}</td>
                  <td>{{ tarea.acredita }}</td>
                  <td>{{ tarea.area }}</td>
                  <td>{{ tarea.responsable }}</td>
                  <td>{{ tarea.fechaEntrega }}</td>
                </tr>
              </ng-template>
            </p-table>
          </div>
          <div class="styleInput documents__area datos-generales">
            <label>Descripción</label>
            <textarea
              pInputTextarea
              (keyup)="countCharacters($event)"
              maxlength="250"
              [autoResize]="true"
            ></textarea>
            <div
              class="count-characters"
              [ngClass]="isMax ? 'status-characters-max' : ''"
            >
              {{ countChars }} / {{ maxCharacters }} máx.
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!--Tipo de documentos-->
  <section class="typeDocument">
    <div class="container">
      <div class="sectionNoBg">
        <div class="sectionNoBg__title">Tipo de documentos</div>
        <div class="sectionNoBg__content">
          <div class="typeDocument__content">
            <div class="typeDocument__chip">
              <p-chip
                *ngFor="let chip of chips"
                label="{{ chip.name }}"
                [ngClass]="{ disable: !chip.status, active: chip.id == idChip }"
                (click)="mostrarDocumentos(chip.id)"
              ></p-chip>
            </div>
          </div>
          <!--Colaborador-->
          <div class="typeDocument__document" *ngIf="colaborador">
            <div class="typeDocument__title">Descripción del documento:</div>
            <div class="typeDocument__text">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
              eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
              enim ad minim veniam, quis nostrud exercitation ullamco laboris
              nisi ut aliquip ex ea commodo consequat.
            </div>
            <!--Header carga de documentos-->
            <div class="typeDocument__title">Carga de documentos:</div>
            <div class="typeDocument__text u-mb-40">
              Tamaño máximo de carga 3 MB por archivo, extensiones permitidas:
              .pdf, .doc, .docx, .pptx, .xls
            </div>

            <ng-container *ngIf="contrato">
              <div class="typeDocument__files">
                <div *ngFor="let item of doc_contratos; let i = index">
                  <div class="typeDocument__box">
                    <div class="typeDocument__box-id">{{ item.id }}.-</div>
                    <div class="typeDocument__box-name">
                      <div>{{ item.name }}</div>
                      <img
                        src="assets/img/iconos/ico-file-earmark-pdf-fill.svg"
                        alt="icono de archivo"
                      />
                    </div>
                    <img
                      src="assets/img/iconos/ico-trash.svg"
                      (click)="eliminarDocs(i)"
                      alt="icono eliminar"
                    />
                  </div>
                </div>
              </div>
              <div
                class="styleInput typeDocument__add"
                *ngFor="let file of files"
              >
                <input
                  type="file"
                  class="inputFile u-mb-5"
                  [id]="file.id"
                  (change)="handleFileInput($event, file)"
                />
                <label [for]="file.id">Agregar documento</label>
                <a class="typeDocument__add-link" (click)="agregarNuevosDoc()"
                  >+agregar documento</a
                >
              </div>
            </ng-container>

            <ng-container *ngIf="adendas">
              <div class="typeDocument__files">
                <div *ngFor="let item of doc_adendas; let i = index">
                  <div class="typeDocument__box">
                    <div class="typeDocument__box-id">{{ item.id }}.-</div>
                    <div class="typeDocument__box-name">
                      <div>{{ item.name }}</div>
                      <img
                        src="assets/img/iconos/ico-file-earmark-pdf-fill.svg"
                        alt="icono de archivo"
                      />
                    </div>
                    <img
                      src="assets/img/iconos/ico-trash.svg"
                      (click)="eliminarDocs(i)"
                      alt="icono eliminar"
                    />
                  </div>
                </div>
              </div>
              <div
                class="styleInput typeDocument__add"
                *ngFor="let file of files"
              >
                <input
                  type="file"
                  class="inputFile u-mb-5"
                  [id]="file.id"
                  (change)="handleFileInput($event, file)"
                />
                <label [for]="file.id">Agregar documento</label>
                <a class="typeDocument__add-link" (click)="agregarNuevosDoc()"
                  >+agregar documento</a
                >
              </div>
            </ng-container>

            <ng-container *ngIf="anexos">
              <div class="typeDocument__files">
                <div *ngFor="let item of doc_anexos; let i = index">
                  <div class="typeDocument__box">
                    <div class="typeDocument__box-id">{{ item.id }}.-</div>
                    <div class="typeDocument__box-name">
                      <div>{{ item.name }}</div>
                      <img
                        src="assets/img/iconos/ico-file-earmark-pdf-fill.svg"
                        alt="icono de archivo"
                      />
                    </div>
                    <img
                      src="assets/img/iconos/ico-trash.svg"
                      (click)="eliminarDocs(i)"
                      alt="icono eliminar"
                    />
                  </div>
                </div>
              </div>
              <div
                class="styleInput typeDocument__add"
                *ngFor="let file of files"
              >
                <input
                  type="file"
                  class="inputFile u-mb-5"
                  [id]="file.id"
                  (change)="handleFileInput($event, file)"
                />
                <label [for]="file.id">Agregar documento</label>
                <a class="typeDocument__add-link" (click)="agregarNuevosDoc()"
                  >+agregar documento</a
                >
              </div>
            </ng-container>

            <ng-container *ngIf="explicacion">
              <div class="typeDocument__files">
                <div *ngFor="let item of doc_explicacion; let i = index">
                  <div class="typeDocument__box">
                    <div class="typeDocument__box-id">{{ item.id }}.-</div>
                    <div class="typeDocument__box-name">
                      <div>{{ item.name }}</div>
                      <img
                        src="assets/img/iconos/ico-file-earmark-pdf-fill.svg"
                        alt="icono de archivo"
                      />
                    </div>
                    <img
                      src="assets/img/iconos/ico-trash.svg"
                      (click)="eliminarDocs(i)"
                      alt="icono eliminar"
                    />
                  </div>
                </div>
              </div>
              <div
                class="styleInput typeDocument__add"
                *ngFor="let file of files"
              >
                <input
                  type="file"
                  class="inputFile u-mb-5"
                  [id]="file.id"
                  (change)="handleFileInput($event, file)"
                />
                <label [for]="file.id">Agregar documento</label>
                <a class="typeDocument__add-link" (click)="agregarNuevosDoc()"
                  >+agregar documento</a
                >
              </div>
            </ng-container>

            <ng-container *ngIf="fundamento_legal">
              <div class="typeDocument__files">
                <div *ngFor="let item of doc_fundamentos; let i = index">
                  <div class="typeDocument__box">
                    <div class="typeDocument__box-id">{{ item.id }}.-</div>
                    <div class="typeDocument__box-name">
                      <div>{{ item.name }}</div>
                      <img
                        src="assets/img/iconos/ico-file-earmark-pdf-fill.svg"
                        alt="icono de archivo"
                      />
                    </div>
                    <img
                      src="assets/img/iconos/ico-trash.svg"
                      (click)="eliminarDocs(i)"
                      alt="icono eliminar"
                    />
                  </div>
                </div>
              </div>
              <div
                class="styleInput typeDocument__add"
                *ngFor="let file of files"
              >
                <input
                  type="file"
                  class="inputFile u-mb-5"
                  [id]="file.id"
                  (change)="handleFileInput($event, file)"
                />
                <label [for]="file.id">Agregar documento</label>
                <a class="typeDocument__add-link" (click)="agregarNuevosDoc()"
                  >+agregar documento</a
                >
              </div>
            </ng-container>

            <ng-container *ngIf="informes">
              <div class="typeDocument__files">
                <div *ngFor="let item of doc_informes; let i = index">
                  <div class="typeDocument__box">
                    <div class="typeDocument__box-id">{{ item.id }}.-</div>
                    <div class="typeDocument__box-name">
                      <div>{{ item.name }}</div>
                      <img
                        src="assets/img/iconos/ico-file-earmark-pdf-fill.svg"
                        alt="icono de archivo"
                      />
                    </div>
                    <img
                      src="assets/img/iconos/ico-trash.svg"
                      (click)="eliminarDocs(i)"
                      alt="icono eliminar"
                    />
                  </div>
                </div>
              </div>
              <div
                class="styleInput typeDocument__add"
                *ngFor="let file of files"
              >
                <input
                  type="file"
                  class="inputFile u-mb-5"
                  [id]="file.id"
                  (change)="handleFileInput($event, file)"
                />
                <label [for]="file.id">Agregar documento</label>
                <a class="typeDocument__add-link" (click)="agregarNuevosDoc()"
                  >+agregar documento</a
                >
              </div>
            </ng-container>
          </div>

          <!--Administrador-->
          <div class="typeDocument__document" *ngIf="!colaborador">
            <div class="typeDocument__title">Descripción del documento:</div>
            <div class="typeDocument__text">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
              eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
              enim ad minim veniam, quis nostrud exercitation ullamco laboris
              nisi ut aliquip ex ea commodo consequat.
            </div>

            <ng-container *ngIf="contrato">
              <div class="typeDocument__title">Documentos cargados</div>
              <div class="typeDocument__files">
                <div *ngFor="let item of doc_contratos; let i = index">
                  <div class="typeDocument__box">
                    <div class="typeDocument__box-name">
                      <div>{{ item.name }}</div>
                      <img
                        src="assets/img/iconos/ico-file-earmark-pdf-fill.svg"
                        alt="icono PDF"
                      />
                    </div>
                    <img
                      src="assets/img/iconos/ico-dow.svg"
                      alt="icono de descarga"
                    />
                  </div>
                </div>
              </div>
            </ng-container>

            <ng-container *ngIf="adendas">
              <div class="typeDocument__title">Documentos cargados</div>
              <div class="typeDocument__files">
                <div *ngFor="let item of doc_adendas; let i = index">
                  <div class="typeDocument__box">
                    <div class="typeDocument__box-name">
                      <div>{{ item.name }}</div>
                      <img
                        src="assets/img/iconos/ico-file-earmark-pdf-fill.svg"
                        alt="icono PDF"
                      />
                    </div>
                    <img
                      src="assets/img/iconos/ico-dow.svg"
                      alt="icono de descarga"
                    />
                  </div>
                </div>
              </div>
            </ng-container>

            <ng-container *ngIf="anexos">
              <div class="typeDocument__title">Documentos cargados</div>
              <div class="typeDocument__files">
                <div *ngFor="let item of doc_anexos; let i = index">
                  <div class="typeDocument__box">
                    <div class="typeDocument__box-name">
                      <div>{{ item.name }}</div>
                      <img
                        src="assets/img/iconos/ico-file-earmark-pdf-fill.svg"
                        alt="icono PDF"
                      />
                    </div>
                    <img
                      src="assets/img/iconos/ico-dow.svg"
                      alt="icono de descarga"
                    />
                  </div>
                </div>
              </div>
            </ng-container>

            <ng-container *ngIf="explicacion">
              <div class="typeDocument__title">Documentos cargados</div>
              <div class="typeDocument__files">
                <div *ngFor="let item of doc_explicacion; let i = index">
                  <div class="typeDocument__box">
                    <div class="typeDocument__box-name">
                      <div>{{ item.name }}</div>
                      <img
                        src="assets/img/iconos/ico-file-earmark-pdf-fill.svg"
                        alt="icono PDF"
                      />
                    </div>
                    <img
                      src="assets/img/iconos/ico-dow.svg"
                      alt="icono de descarga"
                    />
                  </div>
                </div>
              </div>
            </ng-container>

            <ng-container *ngIf="fundamento_legal">
              <div class="typeDocument__title">Documentos cargados</div>
              <div class="typeDocument__files">
                <div *ngFor="let item of doc_fundamentos; let i = index">
                  <div class="typeDocument__box">
                    <div class="typeDocument__box-name">
                      <div>{{ item.name }}</div>
                      <img
                        src="assets/img/iconos/ico-file-earmark-pdf-fill.svg"
                        alt="icono PDF"
                      />
                    </div>
                    <img
                      src="assets/img/iconos/ico-dow.svg"
                      alt="icono de descarga"
                    />
                  </div>
                </div>
              </div>
            </ng-container>

            <ng-container *ngIf="informes">
              <div class="typeDocument__files">
                <div *ngFor="let item of doc_informes; let i = index">
                  <div class="typeDocument__box">
                    <div class="typeDocument__box-name">
                      <div>{{ item.name }}</div>
                      <img
                        src="assets/img/iconos/ico-file-earmark-pdf-fill.svg"
                        alt="icono PDF"
                      />
                    </div>
                    <img
                      class="downDocuments__delete"
                      src="assets/img/iconos/ico-dow.svg"
                      alt="icono de descarga"
                    />
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!--Revisión-->
  <section class="dataGe">
    <div class="container">
      <div class="sectionNoBg">
        <div class="sectionNoBg__title" *ngIf="colaborador">
          Foro del requerimiento
        </div>
        <div class="sectionNoBg__title" *ngIf="!colaborador">Revisión</div>
        <div class="sectionNoBg__content">
          <div class="dataGe__content">
            <div class="dataGe__grid">
              <div class="styleInput">
                <div *ngIf="!colaborador">
                  <label>Resultado de la revisión</label>
                  <p-dropdown
                    [options]="opt"
                    (onChange)="changeLegal()"
                    optionLabel="name"
                    placeholder="Selecciona el representante legal"
                  ></p-dropdown>
                </div>
                <div
                  class="styleInput documents__area comments"
                  [ngClass]="{ 'u-mt-0': colaborador, 'u-mb-80': colaborador }"
                >
                  <label>Comentarios generales</label>
                  <textarea
                    pInputTextarea
                    (keyup)="countCharacters($event)"
                    maxlength="250"
                    [autoResize]="true"
                    placeholder="Ingresa un comentario"
                  ></textarea>
                  <div
                    class="count-characters"
                    [ngClass]="isMax ? 'status-characters-max' : ''"
                  >
                    {{ countChars }} / {{ maxCharacters }} máx.
                  </div>
                </div>
              </div>
              <div class="styleInput documents__area bitacora">
                <label>Bitácora de comentarios</label>
                <div class="bitacora__content">
                  <div class="ficha">
                    <div class="ficha__msg">
                      Esto son comentarios de quien sube los documentos, puede o
                      no hacer comentarios, son opcionales.
                    </div>
                    <div class="ficha__info">
                      Julio Hernández - Rechazado - 22/09/22 a las 21:30
                    </div>
                  </div>
                  <div class="ficha">
                    <div class="ficha__msg">
                      No entiendo por qué está rechazado
                    </div>
                    <div class="ficha__info">Susana - 23/09/22 a las 10:30</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="buttons-content" *ngIf="save && !colaborador">
        <button class="btn-outline-primary">Cancelar</button>
        <button class="btn-primary" (click)="showModal('modal4')">
          Guardar
        </button>
      </div>
      <div class="buttons-content" *ngIf="colaborador">
        <button class="btn-outline-primary">Cancelar</button>
        <button class="btn-primary" (click)="showModal('modal4')">
          Guardar
        </button>
      </div>
      <div class="buttons-content" *ngIf="toReturn">
        <button class="btn-outline-primary">Regresar</button>
      </div>
    </div>
  </section>
</div>

<!-- Modal Confirmar Cambios -->
<p-dialog
  class="modalNotice"
  [(visible)]="this.displayModal"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
>
  <app-modales [typeModal]="typeModal"></app-modales>
</p-dialog>
